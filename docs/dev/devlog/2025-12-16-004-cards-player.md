# 2025-12-16-004: Cards Collection and Player Protocol

## Focus

Implement `Cards` collection hierarchy and `Player` protocol for engine.

## What Happened

**Cards hierarchy implemented:**

- `Cards(set[Card])` - base class with `group()` method
- `Hand(Cards)` and `Deck(Cards)` - semantic subclasses
- Removed `sort()` method - `sorted(cards)` works directly via `Card.__lt__`

**Suit ordering fixed:**

- Changed to: Clubs < Diamonds < Spades < Hearts (Hearts highest for Hearts
  game)
- Test improved to use adversarial input order (prevents stable sort from
  masking bugs)

**Card.parse() for keyboard input:**

- Accepts `2h`, `qs`, `10d`, `AH` etc. (case insensitive)
- Uses single-letter suit keys: c/d/s/h

**Player protocol:**

- `pass_cards(hand: Hand) -> tuple[Card, Card, Card]`
- `play_card(hand: Hand, valid: Cards) -> Card`
- Runtime checkable for isinstance() checks

**Cleanup:**

- Renamed test `it_winner_card_is_in_trick` â†’ `it_returns_a_card_from_the_trick`
- Removed `norecursedirs` from pytest config (fixed `.hypothesis` warning)

## Files Changed

```
packages/engine/src/hearts_engine/cards.py (modified)
packages/engine/src/hearts_engine/cards_test.py (modified)
packages/engine/src/hearts_engine/player.py (new)
packages/engine/src/hearts_engine/player_test.py (new)
packages/engine/src/hearts_engine/rules_test.py (modified)
pyproject.toml (modified)
```

## Next Session

From devlog 003's list, remaining:

1. Implement basic bot (satisfies Player protocol)
2. Implement CLI renderer (Human class, also satisfies Player protocol)
3. Wire together game loop
